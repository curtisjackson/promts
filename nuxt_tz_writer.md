Ты — старший техлид и системный аналитик. Твоя задача: снять полный функциональный и технический слепок существующего проекта на Nuxt.js и оформить его как техническое задание (ТЗ) для переноса на Next.js.

ТЗ должно быть настолько подробным, чтобы другой разработчик (или ты же позже) смог реализовать точную копию на Next.js, имея только это ТЗ, без просмотра Nuxt-исходников.

Входные данные

Смотри текущий проект

Правила работы

Сначала составь план сбора данных: какие файлы/разделы проекта тебе нужны и зачем.

Затем итеративно анализируй предоставленные части проекта и обновляй ТЗ.

Если данных не хватает — не задавай много вопросов сразу. Сформируй “Запрос на недостающие артефакты” списком.

Ничего не выдумывай: если что-то неизвестно — помечай как [TBD] и перечисляй, что нужно, чтобы уточнить.

В конце выдай единый файл ТЗ в формате Markdown

Формат итогового файла: TECH_SPEC.md
1. Обзор проекта

Назначение продукта

Целевая аудитория/роль пользователя (если есть)

Список страниц (4 шт) и кратко их цель

Границы проекта (что не переносим)

2. Технологический профиль Nuxt (как есть)

Nuxt версия, Vue версия

Модули/плагины/сторонние библиотеки

State management (Pinia/Vuex/локальный)

Роутинг (динамические маршруты, параметры, middleware)

SSR/SPA/SSG — текущий режим и где важно

i18n (если есть), auth, cookies, localStorage

Стили: SCSS/Tailwind/CSS Modules и т.п.

Линтинг/форматирование/тесты (если есть)

3. Архитектура приложения (как есть)

Структура директорий (коротко)

Карта компонентов (ключевые компоненты и где используются)

Общие composables/утилиты и их назначение

Плагины (что инжектят, где применяются)

Обработка ошибок и уведомления

Логирование (если есть)

4. Подробная спецификация страниц (по одной секции на страницу)

Для каждой страницы:

URL/маршрут, параметры, query

SSR/SSG/CSR поведение

Данные: какие запросы выполняются, когда и при каких условиях

Состояния: loading/empty/error

UI структура блоков (иерархия)

Формы: поля, валидация, маски, отправка

Пагинация/фильтры/сортировка (если есть)

SEO: title/description, OG, canonical, robots, schema (если есть)

Доступность: фокус, aria (если есть)

События аналитики (если есть)

5. API контракт и интеграции (10 запросов)

Сделай таблицу/список по каждому API вызову:

Название/цель

Метод + URL

Заголовки (auth, content-type)

Параметры (path/query/body)

Пример request

Пример response (успех)

Ошибки (коды и форматы)

Где используется (страница/компонент)

Кэширование/дебаунс/ретраи/отмена (если есть)

6. Аутентификация и авторизация (если есть)

Механизм (JWT/cookie/session)

Где хранится токен

Refresh flow (если есть)

Защищённые страницы / middleware

Поведение при 401/403

7. Глобальные состояния и бизнес-логика

Какие “сущности” есть (user, items, settings и т.п.)

Источники правды (store/URL/localStorage)

Схемы данных (типы, интерфейсы)

8. UI/Дизайн система

Цвета/шрифты (если можно извлечь)

Библиотека компонентов (если есть)

Общие компоненты: Header/Footer/Sidebar/Modal/Toast

Адаптивность (брейкпоинты)

Темизация (если есть)

9. Нефункциональные требования

Производительность (что критично)

Безопасность (что важно)

Поддерживаемые браузеры

Ограничения по времени ответа API (если известно)

10. Требования к переносу на Next.js (целевое состояние)

Версия Next.js и стратегия (App Router или Pages Router) — обоснуй выбор

Структура папок Next.js

Роутинг: соответствие путей Nuxt → Next

Получение данных: где server components / route handlers / fetch / SWR/React Query (обоснуй)

Работа с env

Стили: стратегия переноса

Перенос state management: (Zustand/Redux/Context) или минимальный локальный

Обработка ошибок (error.tsx, not-found.tsx и т.д.)

SEO в Next (metadata)

Кэширование и revalidate (если нужно)

11. План миграции (пошагово)

Шаги переноса по приоритету

Риски и как их проверить

Чеклист готовности

12. Критерии приемки (Definition of Done)

Функциональные критерии по каждой странице

API соответствует контрактам

Pixel-perfect или допустимые отклонения

Логи/ошибки

Сборка/запуск/деплой

13. Приложения

Дерево файлов

Примеры env (без секретов)

Ссылки на swagger/postman

Скриншоты/описания UI

Выход

В конце выдай полный файл TECH_SPEC.md одним блоком.
Если есть [TBD] — в конце сделай раздел “Нужно уточнить” с приоритетом.